option_settings:
  aws:elasticbeanstalk:application:environment:
    PORT: 5000
    ENVIRONMENT: production
  aws:elasticbeanstalk:environment:proxy:staticfiles:
    /static: static/
  aws:autoscaling:launchconfiguration:
    InstanceType: t3.micro
    IamInstanceProfile: aws-elasticbeanstalk-ec2-role
  aws:elasticbeanstalk:healthreporting:system:
    SystemType: enhanced
  aws:elasticbeanstalk:application:process:
    Port: 5000
    Protocol: HTTP

commands:
  01_install_dependencies:
    command: "pip install -r requirements.txt"
    cwd: "/var/app/ondeck"
  02_migrate_database:
    command: "python -c 'from main import app; print(\"App imported successfully\")'"
    cwd: "/var/app/current"